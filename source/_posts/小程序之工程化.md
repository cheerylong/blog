---
title: 小程序之工程化
date: 2018-08-11 23:39:41
tags: 小程序
categories: 小程序
toc: true
---

## 工程化做什么

目前的前端开发过程，工程化是必不可少的一环，那小程序工程化都需要做些什么呢，目前小程序开发当中存在以下几点问题需要解决：

1. 不支持 css预编译器,作为一种主流的 css解决方案，不论是 less,sass,stylus 都可以提升css效率
2. 不支持引入npm包
3. 不支持ES7等后续的js特性，好用的async await等特性都无法使用
4. 不支持引入外部字体文件，只支持base64

## 方案选型

对于目前常用的工程化方案，webpack，rollup，parcel等来看，都常用与单页应用的打包和处理，而小程序天生是 “多页应用” 并且存在一些特定的配置。根据要解决的问题来看，无非是文件的编译，修改，拷贝这些处理，对于这些需求，我们想到基于流的 **gulp**非常的适合处理，并且相对于webpack配置多页应用更加简单。所以小程序工程化方案推荐使用**gulp**

## 具体开发思路

通过 gulp 的task实现：
    
1. 实时编译 less 文件至相应目录
2. 引入支持async，await的运行时文件
3. 编译字体文件为base64 并生成相应css文件，方便使用
4. 依赖分析哪些地方引用了npm包，将npm包打成一个文件，拷贝至相应目录
