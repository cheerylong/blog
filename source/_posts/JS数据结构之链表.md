---
title: JSæ•°æ®ç»“æž„ä¹‹é“¾è¡¨
date: 2018-04-01 21:05:00
tags: JavaScriptæ•°æ®ç»“æž„
categories: æ•°æ®ç»“æž„å’Œç®—æ³•
---
æœ€è¿‘åœ¨å¤ä¹ æ•°æ®ç»“æž„å’Œç®—æ³•ç›¸å…³çš„ä¸œè¥¿ï¼Œå‡†å¤‡å°†é“¾è¡¨ï¼ŒðŸŒ²ç­‰æ•°æ®ç»“æž„éƒ½ç”¨JSå®žçŽ°ä¸€å“ˆï¼Œè™½ç„¶ä½œä¸ºä¸€ä¸ªå‰ç«¯ç¨‹åºçŒ¿å¹³å¸¸ç”¨åˆ°çš„ä¸å¤šï¼Œä½†å’±é¦–å…ˆæ˜¯ä¸ªç¨‹åºå‘˜ï¼Œç„¶åŽæ‰æ˜¯ç¨‹åºå‘˜ï¼Œå†…åŠŸå¿…é¡»ä¿®ç‚¼å¥½ï¼fightingï¼

- æ ˆå’Œé˜Ÿåˆ—çš„å®žçŽ°é‡‡ç”¨JSåŽŸç”Ÿçš„Arrayæ–¹æ³•å·²ç»å¯ä»¥å®Œå…¨æ¨¡æ‹ŸæŽ‰äº†ï¼Œå®žçŽ°èµ·æ¥ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œå°±ä¸åŽ»ä¸“é—¨å®žçŽ°ä¸€ä¸‹äº†ï¼Œä¸è¿‡ä»£ç ä¸­ä¼šåŒ…å«ï¼Œå’±ä»¬å°±ç›´æŽ¥ä»Žé“¾è¡¨è¿™çŽ©æ„å¼€åˆ€

- é“¾è¡¨ä¼˜äºŽæ•°ç»„çš„æ˜¯å®ƒå¯ä»¥è½»æ¾çš„æ·»åŠ å’Œç§»é™¤é¡¹ï¼Œå®ƒæ²¡æœ‰å›ºå®šçš„é•¿åº¦

## é“¾è¡¨

- [é“¾è¡¨](https://zh.wikipedia.org/wiki/%E9%93%BE%E8%A1%A8#%E6%8E%A5%E5%8F%A3%E5%AE%9E%E7%8E%B0)ä¹Ÿæ˜¯ä¸€ç§å¸¸è§çš„æ•°æ®ç»“æž„ï¼Œæ˜¯ä¸€ç§çº¿æ€§è¡¨ã€‚
- å®ƒå’Œæ•°ç»„ä¸€æ ·éƒ½å¯ä»¥å­˜å‚¨å¤šä¸ªå…ƒç´ ï¼Œä½†æ˜¯æ•°ç»„æ˜¯å­˜å‚¨æœ‰åºçš„æ•°æ®ï¼Œè€Œé“¾è¡¨å‘¢ï¼Œ**å®ƒæ‰€å­˜å‚¨çš„æ˜¯å½“å‰çš„å€¼å’Œä¸‹ä¸€ä¸ªå…ƒç´ çš„æŒ‡é’ˆ**, åœ¨jsä¸­ç†è§£çš„è¯å°±æ˜¯å®ƒçš„æ¯ä¸€é¡¹éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡åŒ…å«å½“å‰çš„å€¼å’Œå¦å¤–ä¸€ä¸ªå¯¹è±¡ï¼Œå¦å¤–ä¸€ä¸ªå¯¹è±¡å°±å®ƒçš„ä¸‹ä¸€é¡¹æ•°æ®ï¼Œä»¥æ­¤ç±»æŽ¨ï¼Œå®ƒä¾¿æˆä¸ºäº†é“¾è¡¨ã€‚
- å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œé“¾è¡¨åˆ†ä¸ºå•å‘é“¾è¡¨ï¼Œå¾ªçŽ¯é“¾è¡¨ï¼ŒåŒå‘é“¾è¡¨ï¼Œè¿˜æœ‰å…¶ä»–çš„æ‰©å±•åž‹ï¼Œå’±ä»¬è¿™é‡Œåªè®¨è®ºå’Œå®žçŽ°è¿™åŸºç¡€çš„ä¸‰ç§ã€‚

### å•å‘é“¾è¡¨

- å•å‘é“¾è¡¨æ˜¯æœ€ç®€å•çš„ä¸€ç§é“¾è¡¨ï¼Œä¹Ÿæ˜¯é“¾è¡¨æœ€åŸºæœ¬çš„ç»“æž„ï¼Œå®ƒåªåŒ…å«ä¸¤ä¸ªåŸŸï¼Œä¸€ä¸ªä¿¡æ¯åŸŸï¼Œä¸€ä¸ªæŒ‡é’ˆåŸŸï¼Œå•å‘é“¾è¡¨çš„æœ€åŽä¸€é¡¹çš„ä¸‹ä¸€ä¸ªå…ƒç´ æŒ‡å‘çš„æ˜¯ä¸€ä¸ªç©ºå€¼ã€‚
å¦‚ä¸‹å›¾æ‰€ç¤º:
![å•å‘é“¾è¡¨](JSæ•°æ®ç»“æž„ä¹‹é“¾è¡¨/singlelink.png)


### åŒå‘é“¾è¡¨

- å®ƒåŒºåˆ«äºŽå•å‘é“¾è¡¨çš„æ˜¯ï¼Œé™¤äº†åŒ…å«å½“å‰çš„å€¼å’Œä¸‹ä¸€é¡¹çš„æŒ‡é’ˆä¹‹å¤–ï¼Œå®ƒè¿˜åŒ…å«ä¸Šä¸€é¡¹çš„æŒ‡é’ˆï¼Œæ‰€ä»¥å®ƒæ˜¯åŒå‘çš„ã€‚
- éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå®ƒçš„ç¬¬ä¸€é¡¹çš„æŒ‡å‘å‰ä¸€é¡¹çš„æŒ‡é’ˆä¸ºç©ºå€¼,æœ€åŽä¸€é¡¹æŒ‡å‘åŽä¸€é¡¹çš„ä¹Ÿæ˜¯ç©ºå€¼
å¦‚ä¸‹å›¾æ‰€ç¤º:
![åŒå‘é“¾è¡¨](JSæ•°æ®ç»“æž„ä¹‹é“¾è¡¨/doubleLink.png)

### å¾ªçŽ¯é“¾è¡¨

- ä»Žå‰é¢æˆ‘ä»¬å¯ä»¥çœ‹åˆ°,æ— è®ºå•é“¾è¡¨æˆ–è€…åŒé“¾è¡¨ï¼Œå®ƒä»¬çš„é¦–æˆ–å°¾éƒ½æ˜¯æœ‰ä¸€ä¸ªç©ºèŠ‚ç‚¹ï¼Œè€Œå¾ªçŽ¯é“¾è¡¨åˆ™æ˜¯å°†é¦–å°¾ä¸²è”äº†èµ·æ¥
å¦‚ä¸‹å›¾æ‰€ç¤º:
![å¾ªçŽ¯é“¾è¡¨](JSæ•°æ®ç»“æž„ä¹‹é“¾è¡¨/cycleLink.png)



### é“¾è¡¨çš„ä½¿ç”¨åœºæ™¯

åœ¨å¼€å§‹å®žçŽ°é“¾è¡¨ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆè€ƒè™‘ä¸€ä¸‹é“¾è¡¨çš„ä½¿ç”¨åœºæ™¯ï¼Œå¾ˆé—æ†¾åœ¨å‰ç«¯å·¥ä½œä¸­ï¼Œæˆ‘ä¸äº†è§£ä»€ä¹ˆæƒ…å†µéœ€è¦ä½¿ç”¨é“¾è¡¨ï¼Œè€Œåœ¨å…¶ä»–é¢†åŸŸè¦ä½¿ç”¨é“¾è¡¨åªéœ€è¦æ»¡è¶³
1. **æ•°æ®**ä¸æ˜¯è¿žç»­å­˜æ”¾çš„,å› ä¸ºé“¾è¡¨å­˜å‚¨çš„æ˜¯æŒ‡é’ˆ
2. æ•°æ®éœ€è¦é¢‘ç¹æ’å…¥å’Œç§»é™¤ (å¦‚æžœæœ‰å¤§é‡çš„è¿™ç§æ“ä½œï¼Œæ€§èƒ½ç›¸å·®ä¼šå¾ˆå¤§)
æƒ³æ¥æƒ³åŽ»ï¼Œæ¯”è¾ƒç›´è§‚çš„ä¸€ä¸ªä¾‹å­ä¾¿æ˜¯æ–‡ä»¶ç³»ç»Ÿï¼Œæ»¡è¶³ä¸Šè¿°æ¡ä»¶ï¼Œå¹¶ä¸”æ–‡ä»¶æ•°æ®åœ¨ç¡¬ç›˜ä¸ä¸€å®šæ˜¯è¿žç»­å­˜æ”¾
å®žé™…ä¸Šé“¾è¡¨è¿˜åœ¨å¾ˆå¤šåº•å±‚æœ‰ç€åº”ç”¨ï¼Œå¯¹äºŽä¸éœ€è¦æœç´¢ä½†å˜åŠ¨é¢‘ç¹ä¸”æ— æ³•é¢„çŸ¥æ•°é‡ä¸Šé™çš„æ•°æ®ï¼Œå®ƒå¯ä»¥èµ·å¾ˆå¤§çš„ä½œç”¨ã€‚
å­¦ä¹ å®ƒè™½ç„¶åœ¨å·¥ä½œä¸­å¯èƒ½ä¸ä¸€å®šä¼šä½¿ç”¨ï¼Œä½†å¯¹äºŽæˆ‘ä»¬ç†è§£å¾ˆå¤šåº•å±‚åŽŸç†è‚¯å®šä¼šæœ‰å¸®åŠ©çš„ã€‚


### å•é“¾è¡¨çš„å®žçŽ°

- åœ¨ä¸Šé¢æˆ‘ä»¬å·²ç»ä»‹ç»äº†å•é“¾è¡¨çš„ç»“æž„ï¼Œä¸‹é¢æˆ‘ä»¬æ¥å®žçŽ°ä¸€ä¸‹
- é‡‡ç”¨ES6è¯­æ³•ï¼Œå¹¶ä½¿ç”¨äº†[WeakMap](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/WeakMap)åˆ›å»ºç§æœ‰å±žæ€§å’Œå…±ç”¨è¯¥æ•°æ®ç»“æž„
- ä»£ç å¦‚ä¸‹ï¼Œè®²è§£å†™åœ¨æ³¨é‡Šä¸­
- æ³¨æ„äº‹é¡¹ï¼š
	1. åˆ›å»ºWeakMap,é˜²æ­¢æ¯åˆ›å»ºä¸€ä¸ªé“¾è¡¨å†…éƒ¨ä¾¿åˆ›å»ºä¸€æ¬¡lengthå’Œheadçš„å˜é‡,èŠ‚çœå†…å­˜
	2. é“¾è¡¨æ“ä½œå®Œæˆï¼Œè®°å¾—æ›´æ–°é“¾è¡¨é•¿åº¦
	3. è®°å¾—åˆ¤æ–­è¶Šç•Œæƒ…å†µï¼Œå•é“¾è¡¨ç´¢å¼•æ˜¯ä»Ž0å¼€å§‹çš„
	4. é“¾è¡¨çš„å¾ªçŽ¯è¾¹ç•Œï¼š1. é•¿åº¦ 2. æœ€åŽä¸€é¡¹çš„ä¸‹ä¸€é¡¹æŒ‡é’ˆä¸ºnull

```javascript
	// é‡‡ç”¨Es6è¯­æ³•æ¨¡æ‹Ÿç±»

	let LinkedList = (function () {

			// åŸºç¡€ç±»ï¼Œä½¿ç”¨è¯¥ç±»åˆ›å»ºé“¾è¡¨åŸºç¡€æ•°æ®
		    class Node {
		        constructor(element){
		            this.element = element;
		            this.next = null;
		        }
		    }

		  
		    const length = new WeakMap();
		    const head = new WeakMap();

		    class LinkedList2 {

		        constructor () {
		            length.set(this, 0);  
		            head.set(this, null); 
		        }

		        append(element) {
		        	// å‘é“¾è¡¨æ’å…¥ä¸€é¡¹
		            let node = new Node(element),
		                current;

		            if (this.getHead() === null) { // å¦‚æžœæ—¶ç©ºé“¾è¡¨ï¼Œå°†è¯¥é¡¹å˜ä¸ºheadå³å¯
		                head.set(this, node);
		            } else {

		                current = this.getHead();      
		                while (current.next) {  // å½“æœ€åŽä¸€é¡¹å˜ä¸ºnull,è¯´æ˜Žå·²ç»åˆ°è¾¾é“¾è¡¨å°¾éƒ¨ï¼Œå°†æœ€åŽä¸€é¡¹æŒ‡å‘æ–°çš„å€¼å®Œæˆæ’å…¥
		                    current = current.next;
		                }
		                current.next = node;

		            }
		            let l = this.size();  //å®Œæˆæ’å…¥ï¼Œæ›´æ–°é“¾è¡¨é•¿åº¦
		            l++;
		            length.set(this, l);
		        }

		        insert(position, element) {
		        	// é“¾è¡¨è¶Šç•Œåˆ¤æ–­
		            if (position >= 0 && position <= this.size()) {
		                let node = new Node(element),
		                    current = this.getHead(),
		                    previous,
		                    index = 0;

		                 // å¦‚æžœæ˜¯å¾€é¦–é¡¹æ’å…¥ï¼Œåˆ™å°†è¯¥é¡¹çš„ä¸‹ä¸€é¡¹æŒ‡é’ˆæŒ‡å‘head,å¹¶å°†è¯¥é¡¹å˜ä¸ºheadå³å¯
		                if (position === 0) { 
		                    node.next = current;
		                    head.set(this, node);
		                } else {
		                	// å¦‚æžœæ˜¯åœ¨ä¸­é—´ä½ç½®æ’å…¥,å°†å‰ä¸€é¡¹çš„æŒ‡é’ˆæŒ‡å‘æ–°å€¼ï¼Œæ–°å€¼å¾—æŒ‡é’ˆæŒ‡å‘åŽŸæ¥çš„ä¸‹ä¸€é¡¹
		                    while (index++ < position) {
		                        previous = current;
		                        current = current.next;
		                    }
		                    node.next = current;
		                    previous.next = node;
		                }
		                let l = this.size();  // å®Œæˆæ’å…¥åŽï¼Œåƒä¸‡ä¸è¦å¿˜äº†æ›´æ–°é•¿åº¦å“¦
		                l++;
		                length.set(this, l);
		                return true;
		            } else {
		                return false;
		            }
		        }

		        removeAt(position) {
		            if (position > -1 && position < this.size()) {

		                let current = this.getHead(),
		                    previous,
		                    index = 0;
		                 // æ–­å¼€æŒ‡é’ˆçš„å…³è”ï¼Œç„¶åŽæ›´æ–°é•¿åº¦ï¼Œåˆ™å¯ä»¥å¾ˆè½»æ¾çš„å®žçŽ°æŒ‡é’ˆçš„ç§»é™¤
		                if (position === 0) {
		                    head.set(this, current.next);
		                } else {
		                    while (index++ < position) {
		                        previous = current;
		                        current = current.next;
		                    }
		                    previous.next = current.next;
		                }
		                let l = this.size();
		                l--;
		                length.set(this, l);
		                return current.element;

		            } else {
		                return null;
		            }
		        }

		        remove(element) {
		        	// å¾ªçŽ¯åˆ¤æ–­å‡ºè¯¥å€¼çš„ä½ç½®ï¼Œå†ç§»é™¤
		            let index = this.indexOf(element);
		            return this.removeAt(index);
		        }

		        indexOf(element) {

		            let current = this.getHead(),
		                index = 0;
		            // å¾ªçŽ¯æ¯”è¾ƒå‡ºï¼ŒæŒ‡é’ˆçš„ä½ç½®
		            while (current) {
		                if (element === current.element) {
		                    return index;
		                }
		                index++;
		                current = current.next;
		            }

		            return -1;
		        }

		        isEmpty() {
		            return this.size() === 0;
		        }

		        size() {
		            return length.get(this);
		        }

		        getHead() {
		            return head.get(this);
		        }

		        toString() {

		            let current = this.getHead(),
		                string = '';

		            while (current) {
		                string += current.element + (current.next ? ', ' : '');
		                current = current.next;
		            }
		            return string;

		        }

		        print() {
		            console.log(this.toString());
		        }
		    }

		    return LinkedList;
})();

```

### æ€»ç»“

- é€šè¿‡äº†è§£é“¾è¡¨çš„åŸºæœ¬æ¦‚å¿µå’Œå®žçŽ°å•é“¾è¡¨ï¼Œå¯¹é“¾è¡¨æœ‰äº†åŸºç¡€çš„äº†è§£ï¼Œç”±äºŽä¸ªäººæ°´å¹³æœ‰é™ï¼Œéš¾å…æœ‰é”™è¯¯ï¼Œåœ¨ä»¥åŽæ¶‰çŒŽåˆ«çš„æ–¹é¢çš„çŸ¥è¯†æ—¶å¯ä»¥å¤šå¤šæ€è€ƒé“¾è¡¨ç›¸æ¯”äºŽå…¶ä»–æ•°æ®ç»“æž„çš„ä¼˜ç‚¹åŠ æ·±ç†è§£ã€‚
- ä»£ç åœ°å€ï¼š
	1. [å•é“¾è¡¨]() 
	2. [å•é“¾è¡¨]()
	3. [å•é“¾è¡¨]()



























